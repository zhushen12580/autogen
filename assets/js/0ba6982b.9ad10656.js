"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8143],{20371:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var i=t(85893),s=t(11151);const o={},a="Agent Backed by OpenAI Assistant API",r={id:"topics/openai-assistant/gpt_assistant_agent",title:"Agent Backed by OpenAI Assistant API",description:"The GPTAssistantAgent is a powerful component of the AutoGen framework, utilizing OpenAI's Assistant API to enhance agents with advanced capabilities. This agent enables the integration of multiple tools such as the Code Interpreter, File Search, and Function Calling, allowing for a highly customizable and dynamic interaction model.",source:"@site/docs/topics/openai-assistant/gpt_assistant_agent.md",sourceDirName:"topics/openai-assistant",slug:"/topics/openai-assistant/gpt_assistant_agent",permalink:"/autogen/docs/topics/openai-assistant/gpt_assistant_agent",draft:!1,unlisted:!1,editUrl:"https://github.com/microsoft/autogen/edit/main/website/docs/topics/openai-assistant/gpt_assistant_agent.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"User Defined Functions",permalink:"/autogen/docs/topics/code-execution/user-defined-functions"},next:{title:"Customize Speaker Selection",permalink:"/autogen/docs/topics/groupchat/customized_speaker_selection"}},l={},c=[{value:"Create a OpenAI Assistant in Autogen",id:"create-a-openai-assistant-in-autogen",level:2},{value:"Use OpenAI Assistant Built-in Tools and Function Calling",id:"use-openai-assistant-built-in-tools-and-function-calling",level:2},{value:"Code Interpreter",id:"code-interpreter",level:3},{value:"File Search",id:"file-search",level:3},{value:"Function calling",id:"function-calling",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"agent-backed-by-openai-assistant-api",children:"Agent Backed by OpenAI Assistant API"}),"\n",(0,i.jsx)(n.p,{children:"The GPTAssistantAgent is a powerful component of the AutoGen framework, utilizing OpenAI's Assistant API to enhance agents with advanced capabilities. This agent enables the integration of multiple tools such as the Code Interpreter, File Search, and Function Calling, allowing for a highly customizable and dynamic interaction model."}),"\n",(0,i.jsx)(n.p,{children:"Version Requirements:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"AutoGen: Version 0.2.27 or higher."}),"\n",(0,i.jsx)(n.li,{children:"OpenAI: Version 1.21 or higher."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Key Features of the GPTAssistantAgent:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Multi-Tool Mastery:  Agents can leverage a combination of OpenAI's built-in tools, like ",(0,i.jsx)(n.a,{href:"https://platform.openai.com/docs/assistants/tools/code-interpreter",children:"Code Interpreter"})," and ",(0,i.jsx)(n.a,{href:"https://platform.openai.com/docs/assistants/tools/file-search",children:"File Search"}),", alongside custom tools you create or integrate via ",(0,i.jsx)(n.a,{href:"https://platform.openai.com/docs/assistants/tools/function-calling",children:"Function Calling"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Streamlined Conversation Management:  Benefit from persistent threads that automatically store message history and adjust based on the model's context length. This simplifies development by allowing you to focus on adding new messages rather than managing conversation flow."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"File Access and Integration:  Enable agents to access and utilize files in various formats. Files can be incorporated during agent creation or throughout conversations via threads. Additionally, agents can generate files (e.g., images, spreadsheets) and cite referenced files within their responses."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"For a practical illustration, here are some examples:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/notebooks/agentchat_oai_assistant_function_call",children:"Chat with OpenAI Assistant using function call"})," demonstrates how to leverage function calling to enable intelligent function selection."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/notebooks/agentchat_oai_code_interpreter",children:"GPTAssistant with Code Interpreter"})," showcases the integration of the  Code Interpreter tool which executes Python code dynamically within applications."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/notebooks/agentchat_oai_assistant_groupchat",children:"Group Chat with GPTAssistantAgent"})," demonstrates how to use the GPTAssistantAgent in AutoGen's group chat mode, enabling collaborative task performance through automated chat with agents powered by LLMs, tools, or humans."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"create-a-openai-assistant-in-autogen",children:"Create a OpenAI Assistant in Autogen"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import os\n\nfrom autogen import config_list_from_json\nfrom autogen.agentchat.contrib.gpt_assistant_agent import GPTAssistantAgent\n\nassistant_id = os.environ.get("ASSISTANT_ID", None)\nconfig_list = config_list_from_json("OAI_CONFIG_LIST")\nllm_config = {\n    "config_list": config_list,\n}\nassistant_config = {\n    # define the openai assistant behavior as you need\n}\noai_agent = GPTAssistantAgent(\n    name="oai_agent",\n    instructions="I\'m an openai assistant running in autogen",\n    llm_config=llm_config,\n    assistant_config=assistant_config,\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"use-openai-assistant-built-in-tools-and-function-calling",children:"Use OpenAI Assistant Built-in Tools and Function Calling"}),"\n",(0,i.jsx)(n.h3,{id:"code-interpreter",children:"Code Interpreter"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.a,{href:"https://platform.openai.com/docs/assistants/tools/code-interpreter",children:"Code Interpreter"})," empowers your agents to write and execute Python code in a secure environment provide by OpenAI. This unlocks several capabilities, including but not limited to:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Process data: Handle various data formats and manipulate data on the fly."}),"\n",(0,i.jsx)(n.li,{children:"Generate outputs: Create new data files or even visualizations like graphs."}),"\n",(0,i.jsx)(n.li,{children:"..."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Using the Code Interpreter with the following configuration."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'assistant_config = {\n    "tools": [\n        {"type": "code_interpreter"},\n    ],\n    "tool_resources": {\n        "code_interpreter": {\n            "file_ids": ["$file.id"]  # optional. Files that are passed at the Assistant level are accessible by all Runs with this Assistant.\n        }\n    }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["To get the ",(0,i.jsx)(n.code,{children:"file.id"}),", you can employ two methods:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["OpenAI Playground: Leverage the OpenAI Playground, an interactive platform accessible at ",(0,i.jsx)(n.a,{href:"https://platform.openai.com/playground",children:"https://platform.openai.com/playground"}),", to upload your files and obtain the corresponding file IDs."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Code-Based Uploading: Alternatively, you can upload files and retrieve their file IDs programmatically using the following code snippet:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from openai import OpenAI\nclient = OpenAI(\n    # Defaults to os.environ.get("OPENAI_API_KEY")\n)\n# Upload a file with an "assistants" purpose\nfile = client.files.create(\n  file=open("mydata.csv", "rb"),\n  purpose=\'assistants\'\n)\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"file-search",children:"File Search"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.a,{href:"https://platform.openai.com/docs/assistants/tools/file-search",children:"File Search"})," tool empowers your agents to tap into knowledge beyond its pre-trained model. This allows you to incorporate your own documents and data, such as product information or code files, into your agent's capabilities."]}),"\n",(0,i.jsx)(n.p,{children:"Using the File Search with the following configuration."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'assistant_config = {\n    "tools": [\n        {"type": "file_search"},\n    ],\n    "tool_resources": {\n        "file_search": {\n            "vector_store_ids": ["$vector_store.id"]\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Here's how to obtain the vector_store.id using two methods:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["OpenAI Playground: Leverage the OpenAI Playground, an interactive platform accessible at ",(0,i.jsx)(n.a,{href:"https://platform.openai.com/playground",children:"https://platform.openai.com/playground"}),", to create a vector store, upload your files, and add it into your vector store. Once complete, you'll be able to retrieve the associated ",(0,i.jsx)(n.code,{children:"vector_store.id"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Code-Based Uploading:Alternatively, you can upload files and retrieve their file IDs programmatically using the following code snippet:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from openai import OpenAI\nclient = OpenAI(\n    # Defaults to os.environ.get("OPENAI_API_KEY")\n)\n\n# Step 1: Create a Vector Store\nvector_store = client.beta.vector_stores.create(name="Financial Statements")\nprint("Vector Store created:", vector_store.id)  # This is your vector_store.id\n\n# Step 2: Prepare Files for Upload\nfile_paths = ["edgar/goog-10k.pdf", "edgar/brka-10k.txt"]\nfile_streams = [open(path, "rb") for path in file_paths]\n\n# Step 3: Upload Files and Add to Vector Store (with status polling)\nfile_batch = client.beta.vector_stores.file_batches.upload_and_poll(\n    vector_store_id=vector_store.id, files=file_streams\n)\n\n# Step 4: Verify Completion (Optional)\nprint("File batch status:", file_batch.status)\nprint("Uploaded file count:", file_batch.file_counts.processed)\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"function-calling",children:"Function calling"}),"\n",(0,i.jsx)(n.p,{children:"Function Calling empowers you to extend the capabilities of your agents with your pre-defined functionalities, which allows you to describe custom functions to the Assistant, enabling intelligent function selection and argument generation."}),"\n",(0,i.jsx)(n.p,{children:"Using the Function calling with the following configuration."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# learn more from https://platform.openai.com/docs/guides/function-calling/function-calling\nfrom autogen.function_utils import get_function_schema\n\ndef get_current_weather(location: str) -> dict:\n    """\n    Retrieves the current weather for a specified location.\n\n    Args:\n    location (str): The location to get the weather for.\n\n    Returns:\n    Union[str, dict]: A dictionary with weather details..\n    """\n\n    # Simulated response\n    return {\n        "location": location,\n        "temperature": 22.5,\n        "description": "Partly cloudy"\n    }\n\napi_schema = get_function_schema(\n    get_current_weather,\n    name=get_current_weather.__name__,\n    description="Returns the current weather data for a specified location."\n)\n\nassistant_config = {\n    "tools": [\n        {\n            "type": "function",\n            "function": api_schema,\n        }\n    ],\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>r,a:()=>a});var i=t(67294);const s={},o=i.createContext(s);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);